// Function to get an item from localStorage and delete it
function getAndDeleteFromLocalStorage(key) {
    const item = localStorage.getItem(key);
    if (item) {
        localStorage.removeItem(key);
        return item;
    } else {
        console.log(`Item with key "${key}" not found in localStorage.`);
        return null;
    }
}

// Function to save data to a file using the File System Access API
async function saveToFileSystem(data, fileName) {
    try {
        // Show file save dialog
        const handle = await window.showSaveFilePicker({
            suggestedName: fileName,
            types: [{
                description: 'Text Files',
                accept: {'text/plain': ['.txt']}
            }]
        });

        // Create a writable stream
        const writableStream = await handle.createWritable();

        // Write data to the file
        await writableStream.write(data);

        // Close the file and write the contents to disk
        await writableStream.close();

        console.log('File saved successfully.');
    } catch (error) {
        console.error('Error saving file:', error);
    }
}

// Example usage
const key = 'myKey';
const data = getAndDeleteFromLocalStorage(key);
if (data) {
    saveToFileSystem(data, 'myFile.txt');
}
